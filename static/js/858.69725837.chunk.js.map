{"version":3,"file":"static/js/858.69725837.chunk.js","mappings":"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","sources":["../node_modules/viem/errors/ccip.ts","../node_modules/viem/utils/address/isAddressEqual.ts","../node_modules/viem/utils/ccip.ts"],"sourcesContent":["import type { Address } from 'abitype'\n\nimport type { Hex } from '../types/misc.js'\nimport { stringify } from '../utils/stringify.js'\n\nimport { BaseError } from './base.js'\nimport { getUrl } from './utils.js'\n\nexport type OffchainLookupErrorType = OffchainLookupError & {\n  name: 'OffchainLookupError'\n}\nexport class OffchainLookupError extends BaseError {\n  override name = 'OffchainLookupError'\n  constructor({\n    callbackSelector,\n    cause,\n    data,\n    extraData,\n    sender,\n    urls,\n  }: {\n    callbackSelector: Hex\n    cause: BaseError\n    data: Hex\n    extraData: Hex\n    sender: Address\n    urls: readonly string[]\n  }) {\n    super(\n      cause.shortMessage ||\n        'An error occurred while fetching for an offchain result.',\n      {\n        cause,\n        metaMessages: [\n          ...(cause.metaMessages || []),\n          cause.metaMessages?.length ? '' : [],\n          'Offchain Gateway Call:',\n          urls && [\n            '  Gateway URL(s):',\n            ...urls.map((url) => `    ${getUrl(url)}`),\n          ],\n          `  Sender: ${sender}`,\n          `  Data: ${data}`,\n          `  Callback selector: ${callbackSelector}`,\n          `  Extra data: ${extraData}`,\n        ].flat(),\n      },\n    )\n  }\n}\n\nexport type OffchainLookupResponseMalformedErrorType =\n  OffchainLookupResponseMalformedError & {\n    name: 'OffchainLookupResponseMalformedError'\n  }\nexport class OffchainLookupResponseMalformedError extends BaseError {\n  override name = 'OffchainLookupResponseMalformedError'\n  constructor({ result, url }: { result: any; url: string }) {\n    super(\n      'Offchain gateway response is malformed. Response data must be a hex value.',\n      {\n        metaMessages: [\n          `Gateway URL: ${getUrl(url)}`,\n          `Response: ${stringify(result)}`,\n        ],\n      },\n    )\n  }\n}\n\nexport type OffchainLookupSenderMismatchErrorType =\n  OffchainLookupSenderMismatchError & {\n    name: 'OffchainLookupSenderMismatchError'\n  }\nexport class OffchainLookupSenderMismatchError extends BaseError {\n  override name = 'OffchainLookupSenderMismatchError'\n  constructor({ sender, to }: { sender: Address; to: Address }) {\n    super(\n      'Reverted sender address does not match target contract address (`to`).',\n      {\n        metaMessages: [\n          `Contract address: ${to}`,\n          `OffchainLookup sender address: ${sender}`,\n        ],\n      },\n    )\n  }\n}\n","import type { Address } from 'abitype'\n\nimport {\n  InvalidAddressError,\n  type InvalidAddressErrorType,\n} from '../../errors/address.js'\nimport type { ErrorType } from '../../errors/utils.js'\nimport { isAddress } from './isAddress.js'\n\nexport type IsAddressEqualReturnType = boolean\nexport type IsAddressEqualErrorType = InvalidAddressErrorType | ErrorType\n\nexport function isAddressEqual(a: Address, b: Address) {\n  if (!isAddress(a, { strict: false }))\n    throw new InvalidAddressError({ address: a })\n  if (!isAddress(b, { strict: false }))\n    throw new InvalidAddressError({ address: b })\n  return a.toLowerCase() === b.toLowerCase()\n}\n","import type { Abi, Address } from 'abitype'\n\nimport { type CallParameters, call } from '../actions/public/call.js'\nimport type { Transport } from '../clients/transports/createTransport.js'\nimport { type BaseError } from '../errors/base.js'\nimport {\n  OffchainLookupError,\n  OffchainLookupResponseMalformedError,\n  OffchainLookupSenderMismatchError,\n} from '../errors/ccip.js'\nimport { HttpRequestError } from '../errors/request.js'\nimport type { Chain } from '../types/chain.js'\nimport type { Hex } from '../types/misc.js'\n\nimport type { Client } from '../clients/createClient.js'\nimport type { ErrorType } from '../errors/utils.js'\nimport { decodeErrorResult } from './abi/decodeErrorResult.js'\nimport { encodeAbiParameters } from './abi/encodeAbiParameters.js'\nimport { isAddressEqual } from './address/isAddressEqual.js'\nimport { concat } from './data/concat.js'\nimport { isHex } from './data/isHex.js'\nimport { stringify } from './stringify.js'\n\nexport const offchainLookupSignature = '0x556f1830'\nexport const offchainLookupAbiItem = {\n  name: 'OffchainLookup',\n  type: 'error',\n  inputs: [\n    {\n      name: 'sender',\n      type: 'address',\n    },\n    {\n      name: 'urls',\n      type: 'string[]',\n    },\n    {\n      name: 'callData',\n      type: 'bytes',\n    },\n    {\n      name: 'callbackFunction',\n      type: 'bytes4',\n    },\n    {\n      name: 'extraData',\n      type: 'bytes',\n    },\n  ],\n} as const satisfies Abi[number]\n\nexport type OffchainLookupErrorType = ErrorType\n\nexport async function offchainLookup<TChain extends Chain | undefined>(\n  client: Client<Transport, TChain>,\n  {\n    blockNumber,\n    blockTag,\n    data,\n    to,\n  }: Pick<CallParameters, 'blockNumber' | 'blockTag'> & {\n    data: Hex\n    to: Address\n  },\n): Promise<Hex> {\n  const { args } = decodeErrorResult({\n    data,\n    abi: [offchainLookupAbiItem],\n  })\n  const [sender, urls, callData, callbackSelector, extraData] = args\n\n  const { ccipRead } = client\n  const ccipRequest_ =\n    ccipRead && typeof ccipRead?.request === 'function'\n      ? ccipRead.request\n      : ccipRequest\n\n  try {\n    if (!isAddressEqual(to, sender))\n      throw new OffchainLookupSenderMismatchError({ sender, to })\n\n    const result = await ccipRequest_({ data: callData, sender, urls })\n\n    const { data: data_ } = await call(client, {\n      blockNumber,\n      blockTag,\n      data: concat([\n        callbackSelector,\n        encodeAbiParameters(\n          [{ type: 'bytes' }, { type: 'bytes' }],\n          [result, extraData],\n        ),\n      ]),\n      to,\n    } as CallParameters)\n\n    return data_!\n  } catch (err) {\n    throw new OffchainLookupError({\n      callbackSelector,\n      cause: err as BaseError,\n      data,\n      extraData,\n      sender,\n      urls,\n    })\n  }\n}\n\nexport type CcipRequestParameters = {\n  data: Hex\n  sender: Address\n  urls: readonly string[]\n}\n\nexport type CcipRequestReturnType = Hex\n\nexport type CcipRequestErrorType = ErrorType\n\nexport async function ccipRequest({\n  data,\n  sender,\n  urls,\n}: CcipRequestParameters): Promise<CcipRequestReturnType> {\n  let error = new Error('An unknown error occurred.')\n\n  for (let i = 0; i < urls.length; i++) {\n    const url = urls[i]\n    const method = url.includes('{data}') ? 'GET' : 'POST'\n    const body = method === 'POST' ? { data, sender } : undefined\n\n    try {\n      const response = await fetch(\n        url.replace('{sender}', sender).replace('{data}', data),\n        {\n          body: JSON.stringify(body),\n          method,\n        },\n      )\n\n      let result: any\n      if (\n        response.headers.get('Content-Type')?.startsWith('application/json')\n      ) {\n        result = (await response.json()).data\n      } else {\n        result = (await response.text()) as any\n      }\n\n      if (!response.ok) {\n        error = new HttpRequestError({\n          body,\n          details: result?.error\n            ? stringify(result.error)\n            : response.statusText,\n          headers: response.headers,\n          status: response.status,\n          url,\n        })\n        continue\n      }\n\n      if (!isHex(result)) {\n        error = new OffchainLookupResponseMalformedError({\n          result,\n          url,\n        })\n        continue\n      }\n\n      return result\n    } catch (err) {\n      error = new HttpRequestError({\n        body,\n        details: (err as Error).message,\n        url,\n      })\n    }\n  }\n\n  throw error\n}\n"],"names":["OffchainLookupError","_BaseError","_inherits","_super","_createSuper","_ref","_cause$metaMessages","_this","callbackSelector","cause","data","extraData","sender","urls","_classCallCheck","call","shortMessage","metaMessages","concat","_toConsumableArray","length","map","url","getUrl","flat","Object","defineProperty","_assertThisInitialized","_createClass","BaseError","OffchainLookupResponseMalformedError","_BaseError2","_super2","_ref2","_this2","result","stringify","OffchainLookupSenderMismatchError","_BaseError3","_super3","_ref3","_this3","to","isAddressEqual","a","b","isAddress","strict","InvalidAddressError","address","toLowerCase","offchainLookupSignature","offchainLookupAbiItem","name","type","inputs","offchainLookup","_x","_x2","_offchainLookup","apply","arguments","_asyncToGenerator","_regeneratorRuntime","mark","_callee","client","blockNumber","blockTag","_decodeErrorResult","args","_args","callData","ccipRead","ccipRequest_","_yield$call","data_","wrap","_context","prev","next","decodeErrorResult","abi","_slicedToArray","request","ccipRequest","sent","encodeAbiParameters","abrupt","t0","stop","_x3","_ccipRequest","_callee2","error","i","method","body","_response$headers$get","response","_result","_context2","Error","includes","undefined","fetch","replace","JSON","headers","get","startsWith","json","text","ok","HttpRequestError","details","statusText","status","isHex","message"],"sourceRoot":""}